{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ProjectModel",
  "type": "object",
  "properties": {
    "name": {
      "description": "The name of the project",
      "type": [
        "string",
        "null"
      ]
    },
    "buildString": {
      "description": "A build string configured by the user.",
      "type": [
        "string",
        "null"
      ]
    },
    "buildNumber": {
      "description": "The build number configured by the user.",
      "type": [
        "integer",
        "null"
      ],
      "format": "uint64",
      "minimum": 0
    },
    "version": {
      "description": "The version of the project",
      "type": [
        "string",
        "null"
      ]
    },
    "description": {
      "description": "An optional project description",
      "type": [
        "string",
        "null"
      ]
    },
    "authors": {
      "description": "Optional authors",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "license": {
      "description": "The license as a valid SPDX string (e.g. MIT AND Apache-2.0)",
      "type": [
        "string",
        "null"
      ]
    },
    "licenseFile": {
      "description": "The license file (relative to the project root)",
      "type": [
        "string",
        "null"
      ]
    },
    "readme": {
      "description": "Path to the README file of the project (relative to the project root)",
      "type": [
        "string",
        "null"
      ]
    },
    "homepage": {
      "description": "URL of the project homepage",
      "type": [
        "string",
        "null"
      ],
      "format": "uri"
    },
    "repository": {
      "description": "URL of the project source repository",
      "type": [
        "string",
        "null"
      ],
      "format": "uri"
    },
    "documentation": {
      "description": "URL of the project documentation",
      "type": [
        "string",
        "null"
      ],
      "format": "uri"
    },
    "targets": {
      "description": "The target of the project, this may contain\nplatform specific configurations.",
      "anyOf": [
        {
          "$ref": "#/$defs/Targets"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "$defs": {
    "Targets": {
      "description": "A collect of targets including a default target.",
      "type": "object",
      "properties": {
        "defaultTarget": {
          "anyOf": [
            {
              "$ref": "#/$defs/Target"
            },
            {
              "type": "null"
            }
          ]
        },
        "targets": {
          "description": "We use an [`OrderMap`] to preserve the order in which the items where\ndefined in the manifest.",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/Target"
          }
        }
      }
    },
    "Target": {
      "type": "object",
      "properties": {
        "hostDependencies": {
          "description": "Host dependencies of the project",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/PackageSpec"
          }
        },
        "buildDependencies": {
          "description": "Build dependencies of the project",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/PackageSpec"
          }
        },
        "runDependencies": {
          "description": "Run dependencies of the project",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/PackageSpec"
          }
        }
      }
    },
    "PackageSpec": {
      "oneOf": [
        {
          "description": "This is a binary dependency",
          "type": "object",
          "properties": {
            "binary": {
              "$ref": "#/$defs/BinaryPackageSpec"
            }
          },
          "required": [
            "binary"
          ],
          "additionalProperties": false
        },
        {
          "description": "This is a dependency on a source package",
          "type": "object",
          "properties": {
            "source": {
              "$ref": "#/$defs/SourcePackageSpec"
            }
          },
          "required": [
            "source"
          ],
          "additionalProperties": false
        },
        {
          "description": "Pin to a version that is compatible with a version from the \"previous\" environment",
          "type": "object",
          "properties": {
            "pinCompatible": {
              "$ref": "#/$defs/PinCompatibleSpec"
            }
          },
          "required": [
            "pinCompatible"
          ],
          "additionalProperties": false
        }
      ]
    },
    "BinaryPackageSpec": {
      "description": "Similar to a [`rattler_conda_types::NamelessMatchSpec`]",
      "type": "object",
      "properties": {
        "version": {
          "description": "The version spec of the package (e.g. `1.2.3`, `>=1.2.3`, `1.2.*`)",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "build": {
          "description": "The build string of the package (e.g. `py37_0`, `py37h6de7cb9_0`, `py*`)",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "buildNumber": {
          "description": "The build number of the package",
          "type": [
            "string",
            "null"
          ]
        },
        "fileName": {
          "description": "Match the specific filename of the package",
          "type": [
            "string",
            "null"
          ]
        },
        "channel": {
          "description": "The channel of the package",
          "type": [
            "string",
            "null"
          ],
          "format": "uri"
        },
        "subdir": {
          "description": "The subdir of the channel",
          "type": [
            "string",
            "null"
          ]
        },
        "md5": {
          "description": "The md5 hash of the package",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "sha256": {
          "description": "The sha256 hash of the package",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "url": {
          "description": "The URL of the package, if it is available",
          "type": [
            "string",
            "null"
          ],
          "format": "uri"
        },
        "license": {
          "description": "The license of the package",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SourcePackageSpec": {
      "type": "object",
      "properties": {
        "version": {
          "description": "The version spec of the package (e.g. `1.2.3`, `>=1.2.3`, `1.2.*`)",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "build": {
          "description": "The build string of the package (e.g. `py37_0`, `py37h6de7cb9_0`, `py*`)",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "buildNumber": {
          "description": "The build number of the package",
          "type": [
            "string",
            "null"
          ]
        },
        "subdir": {
          "description": "The subdir of the channel",
          "type": [
            "string",
            "null"
          ]
        },
        "license": {
          "description": "The md5 hash of the package\nThe license of the package",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "oneOf": [
        {
          "description": "The spec is represented as an archive that can be downloaded from the\nspecified URL. The package should be retrieved from the URL and can\neither represent a source or binary package depending on the archive\ntype.",
          "type": "object",
          "properties": {
            "url": {
              "$ref": "#/$defs/UrlSpec"
            }
          },
          "required": [
            "url"
          ]
        },
        {
          "description": "The spec is represented as a git repository. The package represents a\nsource distribution of some kind.",
          "type": "object",
          "properties": {
            "git": {
              "$ref": "#/$defs/GitSpec"
            }
          },
          "required": [
            "git"
          ]
        },
        {
          "description": "The spec is represented as a local path. The package should be retrieved\nfrom the local filesystem. The package can be either a source or binary\npackage.",
          "type": "object",
          "properties": {
            "path": {
              "$ref": "#/$defs/PathSpec"
            }
          },
          "required": [
            "path"
          ]
        }
      ]
    },
    "UrlSpec": {
      "type": "object",
      "properties": {
        "url": {
          "description": "The URL of the package",
          "type": "string",
          "format": "uri"
        },
        "md5": {
          "description": "The md5 hash of the package",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "sha256": {
          "description": "The sha256 hash of the package",
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "subdirectory": {
          "description": "The subdirectory of the package in the archive",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "url"
      ]
    },
    "GitSpec": {
      "description": "A specification of a package from a git repository.",
      "type": "object",
      "properties": {
        "git": {
          "description": "The git url of the package which can contain git+ prefixes.",
          "type": "string",
          "format": "uri"
        },
        "rev": {
          "description": "The git revision of the package",
          "anyOf": [
            {
              "$ref": "#/$defs/GitReference"
            },
            {
              "type": "null"
            }
          ]
        },
        "subdirectory": {
          "description": "The git subdirectory of the package",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "git"
      ]
    },
    "GitReference": {
      "description": "A reference to a specific commit in a git repository.",
      "oneOf": [
        {
          "description": "The HEAD commit of a branch.",
          "type": "object",
          "properties": {
            "branch": {
              "type": "string"
            }
          },
          "required": [
            "branch"
          ],
          "additionalProperties": false
        },
        {
          "description": "A specific tag.",
          "type": "object",
          "properties": {
            "tag": {
              "type": "string"
            }
          },
          "required": [
            "tag"
          ],
          "additionalProperties": false
        },
        {
          "description": "A specific commit.",
          "type": "object",
          "properties": {
            "rev": {
              "type": "string"
            }
          },
          "required": [
            "rev"
          ],
          "additionalProperties": false
        },
        {
          "description": "A default branch.",
          "type": "string",
          "const": "defaultBranch"
        }
      ]
    },
    "PathSpec": {
      "description": "A specification of a package from a path",
      "type": "object",
      "properties": {
        "path": {
          "description": "The path to the package",
          "type": "string"
        }
      },
      "required": [
        "path"
      ]
    },
    "PinCompatibleSpec": {
      "type": "object",
      "properties": {
        "lowerBound": {
          "description": "A minimum pin to a version, using `x.x.x...` as syntax",
          "anyOf": [
            {
              "$ref": "#/$defs/PinBound"
            },
            {
              "type": "null"
            }
          ]
        },
        "upperBound": {
          "description": "A pin to a version, using `x.x.x...` as syntax",
          "anyOf": [
            {
              "$ref": "#/$defs/PinBound"
            },
            {
              "type": "null"
            }
          ]
        },
        "exact": {
          "description": "If an exact pin is given, we pin the exact version & hash",
          "type": "boolean"
        },
        "build": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "PinBound": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "expression": {
              "$ref": "#/$defs/PinExpression"
            }
          },
          "required": [
            "expression"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "version": {
              "type": "string"
            }
          },
          "required": [
            "version"
          ],
          "additionalProperties": false
        }
      ]
    },
    "PinExpression": {
      "description": "A pin expression string like \"x\", \"x.x\", \"x.x.x\", etc.\n\nThis represents the number of version segments to pin.\nFor example, \"x.x\" means pin the major and minor version.",
      "type": "string",
      "pattern": "^x(\\.x)*$"
    }
  }
}
