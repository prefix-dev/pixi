[project]
name = "sdl_example"
version = "0.1.0"
description = "Showcases how to create a simple C++ executable with Pixi"
authors = ["Bas Zalmstra <bas@prefix.dev>"]
channels = ["conda-forge"]
platforms = ["win-64", "linux-64", "osx-64", "osx-arm64"]

[tasks]
# Configures CMake
configure = { cmd = [
    "cmake",
    # Use the cross-platform Ninja generator
    "-G",
    "Ninja",
    # The source is in the root directory
    "-S",
    ".",
    # We wanna build in the .build directory
    "-B",
    "$PIXI_BUILD_FOLDER",
    # We want to install into the right prefix directory
    "-DCMAKE_INSTALL_PREFIX=$PIXI_INSTALL_PREFIX",
] }

# Build the executable but make sure CMake is configured first.
build = { cmd = ["ninja", "-C", "$PIXI_BUILD_FOLDER"], depends_on = ["configure"] }

install = { cmd = ["ninja", "-C", "$PIXI_BUILD_FOLDER", "install"], depends_on = ["build"] }

# Start the built executable
start = { cmd = "$PIXI_BUILD_FOLDER/bin/sdl_example", depends_on = ["build"] }

[build-dependencies]
cmake = "3.26.4.*"
cxx-compiler = "1.5.2.*"
ninja = "1.11.1.*"

[host-dependencies]
sdl2 = "2.26.5.*"
